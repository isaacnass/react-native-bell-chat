"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}!function(e,t){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"===("undefined"==typeof module?"undefined":_typeof(module)))module.exports=t(require("react-native"));else if("function"==typeof define&&define.amd)define(["react-native"],t);else{var n="object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("react-native")):t(e["react-native"]);for(var r in n)("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:void 0,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../lib/",n(n.s=11)}([function(e,t,n){e.exports=n(12)},function(t,n){t.exports=e},function(e,t,n){n.d(t,"b",function(){return s});var r=n(0),o=(n.n(r),n(17)),i=n(1),s=(n.n(i),{userBubble:{},recipientBubble:{},chatBubble:{},text:{},createdOn:{},recipientCreatedOn:{},loadingSpinnerColor:"rgba(255, 255, 255, 0.55)",isSendIconColor:"#cddc39",systemChatBubbleContainerStyle:{}}),a=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mouseOverLastSeenContainer:!1},n}return _inherits(t,r["Component"]),_createClass(t,[{key:"render",value:function(){var e=this;if(!this.props.message)return null;var t=this.props.yourAuthorId,n=this.props.bubbleStyles,a=n=n||s,l=a.userBubble,u=a.chatBubble,c=a.text,p=a.recipientBubble,h=this.props.message.authorId===t,f=[o.a.chatBubble,h?{}:o.a.recipientChatBubble,h?o.a.chatBubbleOrientationNormal:o.a.recipientChatBubbleOrientationNormal,this.props.isFirstInGroup&&(h?o.a.firstChatBubbleInGroup:o.a.recipientFirstChatBubbleInGroup),this.props.isLastInGroup&&(h?o.a.lastChatBubbleInGroup:o.a.recipientLastChatBubbleInGroup),this.props.isCenterInGroup&&(h?o.a.centerChatBubbleInGroup:o.a.recipientCenterChatBubbleInGroup),u,h?l:p];return r.createElement(i.View,{style:[o.a.chatBubbleWrapper]},r.createElement(i.View,{style:[].concat(f)},r.createElement(i.Text,{style:[o.a.p,c,h?n.userText:n.recipientText]},this.props.message.message),this.props.message.createdOn&&r.createElement(i.Text,{style:[o.a.createdOn,h?n.createdOn:n.recipientCreatedOn]},this.props.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})),void 0!==this.props.message.isSend&&h&&r.createElement(i.Text,{style:[o.a.isSend]},this.props.message.isSend?r.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",preserveAspectRatio:"xMidYMid",style:{background:"none"}},r.createElement("path",Object.assign({fill:n.isSendIconColor?n.isSendIconColor:s.isSendIconColor},{},{d:"M9,1.7L8.6,1.4C8.5,1.3,8.3,1.3,8.2,1.4L3.9,7C3.8,7.1,3.6,7.1,3.5,7c0,0,0,0,0,0L1.7,5.3c-0.1-0.1-0.3-0.1-0.4,0L1,5.6 C0.9,5.7,0.9,5.9,1,6l2.6,2.6c0.1,0.1,0.3,0.1,0.4,0L9,2.1C9.1,2,9.1,1.8,9,1.7z"}))):r.createElement("svg",{width:"10px",height:"10px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",className:"lds-eclipse",style:{background:"none"}},r.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 45 0 0 1 10 50",fill:n.loadingSpinnerColor?n.loadingSpinnerColor:s.loadingSpinnerColor,transform:"rotate(78 50 52.5)"},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 52.5;360 50 52.5",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))),this.props.showRecipientLastSeenMessage&&this.props.lastSeenByAuthors&&this.props.lastSeenByAuthors.length>0&&this.props.customLastSeenAvatar&&r.createElement(i.View,{style:o.a.lastSeenByContainer},this.props.lastSeenByAuthors.map(function(t,n){return r.createElement(e.props.customLastSeenAvatar,{key:n,author:t,containerStyle:Object.assign({},n>0&&!e.state.mouseOverLastSeenContainer?{marginTop:-12}:{marginTop:-4},{zIndex:100+n})})})))}}]),t}();t.a=a},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{container:{position:"absolute",left:-50,top:0,width:40,height:40,backgroundColor:"rgb(153, 153, 153)",borderRadius:20,borderTopRightRadius:5,alignContent:"center",alignItems:"center",justifyContent:"center"},text:{color:"rgb(255,255,255)",lineHeight:40,fontWeight:"400",textAlign:"center"}});t.a=function(e){return e.author&&r.createElement(o.View,{style:[i.container,e.avatarStyles&&e.avatarStyles.containerStyle]},r.createElement(o.Text,{style:[i.text,e.avatarStyles&&e.avatarStyles.textStyle]},e.author.avatarName?e.author.avatarName:e.author.name.split(" ").map(function(e){return e[0]}).join("").toUpperCase().substr(0,3)))}},function(e,t,n){var r=n(0),o=(n.n(r),n(2)),i=n(1),s=(n.n(i),{container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}});t.a=function(e){var t=e.bubbleStyles;t=t||o.b;var n=e.message.createdOn&&e.message.createdOn.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0});return e.message&&r.createElement(i.View,{style:[s.container,t.systemChatBubbleContainerStyle]},n&&r.createElement(i.Text,null,n,":"," "),r.createElement(i.Text,null,e.message.message))}},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{container:{position:"absolute",bottom:2,left:0,right:0,color:"rgb(204, 204, 204)",textAlign:"center"}});t.a=function(e){return e.typingAuthors&&e.typingAuthors.length>0&&r.createElement(o.Text,{style:i.container},e.typingAuthors.map(function(e){return e.name}).join(", ").replace(/,(?!.*,)/gim," and")+(1===e.typingAuthors.length?" is ":" are ")+"typing")}},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{chatHistory:{padding:"0 10px"}}),s=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clientHeight=0,n.scrollHeight=0,n.scrollTop=0,n}return _inherits(t,r["Component"]),_createClass(t,[{key:"render",value:function(){var e=this;return r.createElement(o.ScrollView,{onLayout:function(t){e.clientHeight=t.nativeEvent.layout.height},contentContainerStyle:{padding:10},ref:function(t){e.scrollContainer=t,e.props.apiRef&&e.props.apiRef({scrollToBottom:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return t&&t.scrollToEnd({animated:e})},scrollTo:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&t.scrollTo({y:e,animated:n})},scrolledToBottom:function(){return e.clientHeight+e.scrollTop>=e.scrollHeight},scrolledToLoadThreshold:function(){return e.scrollContainer&&e.scrollTop<=e.props.loadOldMessagesThreshold},scrollTop:function(){return e.scrollContainer&&e.scrollTop},scrollHeight:function(){return e.scrollContainer&&e.scrollHeight},clientHeight:function(){return e.scrollContainer&&e.clientHeight}})},style:[i.chatHistory,void 0!==this.props.maxHeight?{maxHeight:this.props.maxHeight}:{},void 0!==this.props.minHeight?{minHeight:this.props.minHeight}:{},this.props.containerStyles],onScroll:function(t){e.scrollContainer&&t.nativeEvent.contentOffset.y<=e.props.loadOldMessagesThreshold&&e.props.onLoadOldMessages(),e.scrollTop=t.nativeEvent.contentOffset.y},scrollEventThrottle:16},r.createElement(o.View,{onLayout:function(t){e.scrollHeight=t.nativeEvent.layout.height+20}},this.props.children))}}]),t}();t.a=s},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{container:{width:20,height:20,backgroundColor:"rgb(153, 153, 153)",borderRadius:10,textAlign:"center",transition:"0.3s all ease-in-out"},text:{color:"white",fontSize:10,lineHeight:20,fontWeight:"400"}});t.a=function(e){return e.author&&r.createElement(o.View,{style:[i.container,e.containerStyle]},r.createElement(o.Text,{style:[i.text,e.textStyle]},e.author.lastSeenAvatarName?e.author.lastSeenAvatarName:e.author.name[0].toUpperCase()))}},function(e,t,n){var r=n(0),o=(n.n(r),n(2)),i=n(4),s=n(18),a=n(3),l=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,r["Component"]),_createClass(t,[{key:"renderGroup",value:function(e,t){var n=this,a=this.props,l=a.bubblesCentered,u=a.bubbleStyles,c=a.showRecipientAvatar,p=a.customChatBubble,h=a.customSystemChatBubble,f=a.showRecipientLastSeenMessage,d=a.customLastSeenAvatar,g=p||o.a,y=h||i.a,m=e.map(function(o,i){var s={yourAuthorId:n.props.yourAuthorId,author:t,message:o,bubblesCentered:l,bubbleStyles:u,isFirstInGroup:0===i,isLastInGroup:i===e.length-1&&e.length>1,isCenterInGroup:i<e.length-1&&e.length>1,lastSeenByAuthors:n.props.authors&&n.props.authors.filter(function(e){return void 0!==e.lastSeenMessageId&&e.lastSeenMessageId===o.id}),showRecipientLastSeenMessage:f,customLastSeenAvatar:d};return void 0!==o.authorId?r.createElement(g,Object.assign({key:i},s)):r.createElement(y,Object.assign({key:i},s))}),b=t&&this.props.yourAuthorId===t.id;return r.createElement("div",{style:s.a.chatBubbleWrapper},!b&&c&&t&&this.props.customAvatar&&this.props.customAvatar({author:this.props.author}),m)}},{key:"render",value:function(){var e=this.props,t=e.messages,n=e.author;return this.renderGroup(t,n)}}]),t}();t.a=l,l.defaultProps={messages:[],author:void 0,customAvatar:a.a,showRecipientLastSeenMessage:!1}},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{container:{textAlign:"center",fontSize:12,color:"rgba(0, 0, 0, 0.55)"}});t.a=function(e){return e.date&&r.createElement(o.Text,{style:[i.container,e.containerStyles]},e.date.toLocaleDateString())}},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{containerStyles:{display:"flex",marginBottom:10}}),s=function(e){var t=e.containerStyles;return r.createElement(o.View,{style:[i.containerStyles,t]},r.createElement("svg",{width:"40px",height:"40px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",style:{background:"none",margin:"auto",fill:e.spinnerColor,opacity:e.isVisible?1:0,transition:"0.3s all ease-in-out"}},r.createElement("title",null,"Loading messages"),r.createElement("path",{stroke:"none",d:"M10 50A40 40 0 0 0 90 50A40 46 0 0 1 10 50",transform:"rotate(42 50 53)"},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",calcMode:"linear",values:"0 50 53;360 50 53",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}))))};s.defaultProps={spinnerColor:"rgb(0, 132, 255)"},t.a=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(3),i=n(5),s=n(6),a=n(7),l=n(8),u=n(19),c=n(22),p=n(4),h=n(9),f=n(10);n.d(t,"ChatFeed",function(){return u.a}),n.d(t,"ChatInput",function(){return c.a}),n.d(t,"LoadingMessages",function(){return f.a}),n.d(t,"DateRow",function(){return h.a}),n.d(t,"ChatBubble",function(){return r.a}),n.d(t,"SystemChatBubble",function(){return p.a}),n.d(t,"BubbleGroup",function(){return l.a}),n.d(t,"Avatar",function(){return o.a}),n.d(t,"LastSeenAvatar",function(){return a.a}),n.d(t,"IsTyping",function(){return i.a}),n.d(t,"ChatScrollArea",function(){return s.a})},function(e,t,n){var r=n(13),o=n(14),i=n(15),s=n(16),a="function"==typeof Symbol&&Symbol.for,l=a?Symbol.for("react.element"):60103,u=a?Symbol.for("react.portal"):60106,c=a?Symbol.for("react.fragment"):60107,p=a?Symbol.for("react.strict_mode"):60108,h=a?Symbol.for("react.provider"):60109,f=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,g=a?Symbol.for("react.forward_ref"):60112,y="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);o(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function v(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||b}function S(){}function C(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||b}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){"object"!==(void 0===e?"undefined":_typeof(e))&&"function"!=typeof e&&null!=e&&m("85"),this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},S.prototype=v.prototype;var w=C.prototype=new S;w.constructor=C,r(w,v.prototype),w.isPureReactComponent=!0;var x={current:null},O=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r=void 0,o={},i=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(i=""+t.key),t)O.call(t,r)&&!A.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)void 0===o[r]&&(o[r]=a[r]);return{$$typeof:l,type:e,key:i,ref:s,props:o,_owner:x.current}}function R(e){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&e.$$typeof===l}var T=/\/+/g,B=[];function M(e,t,n,r){if(B.length){var o=B.pop();return o.result=e,o.keyPrefix=t,o.func=n,o.context=r,o.count=0,o}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function E(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>B.length&&B.push(e)}function L(e,t,n,r){var o=void 0===e?"undefined":_typeof(e);"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case l:case u:i=!0}}if(i)return n(r,e,""===t?"."+k(e,0):t),1;if(i=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){var a=t+k(o=e[s],s);i+=L(o,a,n,r)}else if(null===e||void 0===e?a=null:(a=y&&e[y]||e["@@iterator"],a="function"==typeof a?a:null),"function"==typeof a)for(e=a.call(e),s=0;!(o=e.next()).done;)i+=L(o=o.value,a=t+k(o,s++),n,r);else"object"===o&&(n=""+e,m("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return i}function k(e,t){return"object"===(void 0===e?"undefined":_typeof(e))&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function I(e,t){e.func.call(e.context,t,e.count++)}function j(e,t,n){var r=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?P(e,r,n,s.thatReturnsArgument):null!=e&&(R(e)&&(t=o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n,e={$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function P(e,t,n,r,o){var i="";null!=n&&(i=(""+n).replace(T,"$&/")+"/"),t=M(t,i,r,o),null==e||L(e,"",j,t),E(t)}var H={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return P(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=M(null,null,t,n),null==e||L(e,"",I,t),E(t)},count:function(e){return null==e?0:L(e,"",s.thatReturnsNull,null)},toArray:function(e){var t=[];return P(e,t,null,s.thatReturnsArgument),t},only:function(e){return R(e)||m("143"),e}},createRef:function(){return{current:null}},Component:v,PureComponent:C,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:g,render:e}},Fragment:c,StrictMode:p,unstable_AsyncMode:d,createElement:_,cloneElement:function(e,t,n){(null===e||void 0===e)&&m("267",e);var o=void 0,i=r({},e.props),s=e.key,a=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(a=t.ref,u=x.current),void 0!==t.key&&(s=""+t.key);var c=void 0;e.type&&e.type.defaultProps&&(c=e.type.defaultProps);for(o in t)O.call(t,o)&&!A.hasOwnProperty(o)&&(i[o]=void 0===t[o]&&void 0!==c?c[o]:t[o])}if(1===(o=arguments.length-2))i.children=n;else if(1<o){c=Array(o);for(var p=0;p<o;p++)c[p]=arguments[p+2];i.children=c}return{$$typeof:l,type:e.type,key:s,ref:a,props:i,_owner:u}},createFactory:function(e){var t=_.bind(null,e);return t.type=e,t},isValidElement:R,version:"16.3.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:x,assign:r}},G=Object.freeze({default:H}),F=G&&H||G;e.exports=F.default?F.default:F},function(e,t,n){var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,a=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(a[u]=n[u]);if(r){s=r(n);for(var c=0;c<s.length;c++)i.call(n,s[c])&&(a[s[c]]=n[s[c]])}}return a}},function(e,t,n){var r=function(e){};e.exports=function(e,t,n,o,i,s,a,l){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,o,i,s,a,l],p=0;(u=new Error(t.replace(/%s/g,function(){return c[p++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){var r={};e.exports=r},function(e,t,n){function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){t.a={chatBubbleWrapper:{position:"relative",marginBottom:2,display:"flex"},chatBubble:{position:"relative",backgroundColor:"#0084FF",borderRadius:7,marginRight:"auto",marginLeft:"auto",maxWidth:"80%",paddingTop:8,paddingBottom:10,paddingLeft:14,paddingRight:14},chatBubbleOrientationNormal:{marginRight:0},recipientChatBubble:{backgroundColor:"#ccc"},recipientChatBubbleOrientationNormal:{marginLeft:0},p:{color:"#FFFFFF",fontSize:16,fontWeight:"300",margin:0,marginRight:30},firstChatBubbleInGroup:{borderTopRightRadius:0},recipientFirstChatBubbleInGroup:{borderTopLeftRadius:0},lastChatBubbleInGroup:{borderTopRightRadius:0},recipientLastChatBubbleInGroup:{borderTopLeftRadius:0},centerChatBubbleInGroup:{borderTopRightRadius:0,borderBottomRightRadius:0},recipientCenterChatBubbleInGroup:{borderBottomLeftRadius:0,borderTopLeftRadius:0},createdOn:{position:"absolute",right:14,bottom:2,fontSize:9,color:"rgba(255, 255, 255, 0.55)"},isSend:{position:"absolute",right:2,bottom:2,fontSize:9},lastSeenByContainer:{position:"absolute",right:-30,top:0,width:20,height:"100%"}}},function(e,t,n){t.a={chatBubbleWrapper:{marginTop:10,marginBottom:10,position:"relative"},bubbleGroupHeader:{margin:0,fontSize:14,fontWeight:400,color:"#999"}}},function(e,t,n){var r=n(0),o=(n.n(r),n(8)),i=n(2),s=n(20),a=n(3),l=n(5),u=n(6),c=n(7),p=n(21),h=n(9),f=n(10),d=n(4),g=n(1),y=(n.n(g),this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}l((r=r.apply(e,t||[])).next())})}),m=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onLoadOldMessages=n.onLoadOldMessages.bind(n),n.state={isLoadingMessages:!1},n}return _inherits(t,r["Component"]),_createClass(t,[{key:"onMessageSend",value:function(){this.scrollApi&&this.scrollApi.scrollToBottom()}},{key:"shouldComponentUpdate",value:function(e,t){return this.shallowDiffers(this.props,e)||this.shallowDiffers(this.state,t)}},{key:"componentDidMount",value:function(){this.scrollApi&&this.scrollApi.scrollToBottom(!1)}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return{wasScrolledToBottom:this.scrollApi&&this.scrollApi.scrolledToBottom(),scrollHeight:this.scrollApi&&this.scrollApi.scrollHeight(),clientHeight:this.scrollApi&&this.scrollApi.clientHeight()}}},{key:"componentDidUpdate",value:function(e,t,n){if(this.props.messages.length!==e.messages.length&&n&&n.wasScrolledToBottom)this.scrollApi.scrollToBottom(!1);else if(this.props.messages.length!==e.messages.length&&n&&t.isLoadingMessages){var r=this.scrollApi&&this.scrollApi.scrollHeight();this.scrollApi.scrollTo(r-n.scrollHeight,!1)}}},{key:"shallowDiffers",value:function(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}},{key:"renderMessages",value:function(e){var t=this,n=this.props,i=n.bubbleStyles,s=n.customChatBubble,a=n.showRecipientAvatar,l=Object(p.a)(e,function(e){return e.createdOn&&e.createdOn.toDateString()}),u=[],c=0;return Object.keys(l).forEach(function(e){var n=[],p=l[e];p[0]&&p[0].createdOn&&t.props.showDateRow&&u.push(r.createElement(t.props.customDateRow,{key:e,date:p[0].createdOn})),u=u.concat(p.map(function(e,l){if(n.push(e),!p[l+1]||p[l+1].authorId!==e.authorId){var u=n,h=t.props.authors&&t.props.authors.filter(function(t){return t.id===e.authorId})[0];return n=[],c++,r.createElement(o.a,{key:c,yourAuthorId:t.props.yourAuthorId,messages:u,author:h,authors:t.props.authors,showRecipientAvatar:a,customChatBubble:s,bubbleStyles:i,showRecipientLastSeenMessage:t.props.showRecipientLastSeenMessage,customAvatar:t.props.customAvatar,customLastSeenAvatar:t.props.customLastSeenAvatar,customSystemChatBubble:t.props.customSystemChatBubble})}return null}))}),u}},{key:"renderIsTyping",value:function(){var e=this,t=this.props.authors&&this.props.authors.filter(function(t){return t.isTyping&&t.id!==e.props.yourAuthorId});return t&&0!==t.length?r.createElement(l.a,{typingAuthors:t}):null}},{key:"render",value:function(){var e=this;return r.createElement(g.View,{style:[s.a.chatPanel]},r.createElement(this.props.customScrollArea,{minHeight:this.props.minHeight,maxHeight:this.props.maxHeight,apiRef:function(t){return e.scrollApi=t},loadOldMessagesThreshold:this.props.loadOldMessagesThreshold,onLoadOldMessages:this.onLoadOldMessages},r.createElement(g.View,{style:[s.a.chatMessages,this.props.showRecipientAvatar&&s.a.showRecipientAvatarChatMessagesStyle,this.props.showRecipientAvatar&&this.props.showRecipientAvatarChatMessagesStyle,this.props.showIsTyping&&s.a.showIsTypingChatMessagesStyle,this.props.showIsTyping&&this.props.showIsTypingChatMessagesStyle,this.props.showRecipientLastSeenMessage&&s.a.showRecipientLastSeenMessageChatMessagesStyle,this.props.showRecipientLastSeenMessage&&this.props.showRecipientLastSeenMessageChatMessagesStyle]},r.createElement(this.props.customLoadingMessages,{isVisible:this.props.showLoadingMessages||this.state.isLoadingMessages}),this.renderMessages(this.props.messages),this.props.showIsTyping&&this.renderIsTyping())))}},{key:"onLoadOldMessages",value:function(){var e=this;if(!this.state.isLoadingMessages&&this.props.hasOldMessages)return new Promise(function(t){e.setState({isLoadingMessages:!0},function(){return t()})}).then(function(){return y(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onLoadOldMessages){e.next=3;break}return e.next=3,this.props.onLoadOldMessages();case 3:case"end":return e.stop()}},e,this)}))}).then(function(){return y(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){t.setState({isLoadingMessages:!1},function(){t.scrollApi.scrolledToLoadThreshold()&&t.scrollApi.scrollTo(t.props.loadOldMessagesThreshold+1,!1),e()})});case 2:case"end":return e.stop()}},e,this)}))})}}]),t}();t.a=m,m.defaultProps={messages:[],authors:[],customChatBubble:function(e){return r.createElement(i.a,Object.assign({},e))},customAvatar:a.a,customScrollArea:function(e){return r.createElement(u.a,Object.assign({},e))},customLastSeenAvatar:c.a,customDateRow:h.a,customLoadingMessages:f.a,yourAuthorId:0,loadOldMessagesThreshold:50,customSystemChatBubble:d.a}},function(e,t,n){t.a={chatPanel:{display:"flex",flexDirection:"column",flex:1,overflow:"hidden",position:"relative"},showRecipientAvatarChatMessagesStyle:{paddingLeft:50},showIsTypingChatMessagesStyle:{paddingBottom:24,position:"relative"},showRecipientLastSeenMessageChatMessagesStyle:{paddingRight:30},chatBubbleWrapper:{marginTop:10,marginBottom:10,overflow:"visible"},img:{borderRadius:100,bottom:0,left:0,position:"absolute",width:36,zIndex:100},chatMessages:{paddingBottom:10,paddingTop:10}}},function(e,t,n){n.d(t,"a",function(){return r});var r=function(e,t){if("function"!=typeof t)throw new Error("groupBy take a function as only parameter");return e.reduce(function(e,n){var r=t(n);return e[r]||(e[r]=[]),e[r].push(n),e},{})}},function(e,t,n){var r=n(0),o=(n.n(r),n(1)),i=(n.n(o),{chatInput:{flex:1},inputStyle:{border:"none",borderTopWidth:"1",borderTopStyle:"solid",borderTopColor:"#ddd",fontSize:"16",outline:"none",padding:"30",width:"100%"}});t.a=function(e){var t=e.inputStyles,n=e.inputPlaceholder;return r.createElement(o.View,{style:i.chatInput},r.createElement(o.TextInput,{style:[t||i.inputStyle],placeholder:n}))}}])});
